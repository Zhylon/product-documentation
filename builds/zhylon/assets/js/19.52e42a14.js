(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{294:function(e,a,s){"use strict";s.r(a);var t=s(14),n=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"zhylon-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zhylon-cli"}},[e._v("#")]),e._v(" Zhylon CLI")]),e._v(" "),a("p",[e._v("Zhylon CLI is a command-line tool that you may use to manage your Zhylon resources from the command-line.")]),e._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[e._v("Zhylon provides a command-line tool that you may use to manage your Zhylon servers, sites, and resources from the command-line.")]),e._v(" "),a("h2",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),a("blockquote",[a("p",[e._v("Requires "),a("strong",[a("a",{attrs:{href:"https://php.net/releases/",target:"_blank",rel:"noopener noreferrer"}},[e._v("PHP 8.2+"),a("OutboundLink")],1)])])]),e._v(" "),a("p",[e._v("You may install the "),a("strong",[a("a",{attrs:{href:"https://github.com/Zhylon/zhylon-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("Zhylon CLI"),a("OutboundLink")],1)]),e._v(" as a global "),a("strong",[a("a",{attrs:{href:"https://getcomposer.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Composer"),a("OutboundLink")],1)]),e._v(" dependency:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("composer")]),e._v(" global require zhylon/zhylon-cli\n")])])]),a("h2",{attrs:{id:"get-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-started"}},[e._v("#")]),e._v(" Get Started")]),e._v(" "),a("p",[e._v("To view a list of all available Zhylon CLI commands and view the current version of your installation, you may run the zhylon command from the command-line:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon\n")])])]),a("h2",{attrs:{id:"authenticating"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#authenticating"}},[e._v("#")]),e._v(" Authenticating")]),e._v(" "),a("p",[e._v("You will need to generate an API token to interact with the Zhylon CLI.\nTokens are used to authenticate your account without providing personal details.\nAPI tokens can be created from "),a("strong",[a("a",{attrs:{href:"https://zhylon.net/user/api-tokens",target:"_blank",rel:"noopener noreferrer"}},[e._v("Zhylon’s API dashboard"),a("OutboundLink")],1)]),e._v(".")]),e._v(" "),a("p",[e._v("After you have generated an API token, you should authenticate with your Zhylon account using the login command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon login\nzhylon login "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--token")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("your-api-token\n")])])]),a("p",[e._v("Alternatively, if you plan to authenticate with Zhylon from your CI platform, you may set a "),a("code",[e._v("ZHYLON_API_TOKEN")]),e._v(" environment variable in your CI build environment.")]),e._v(" "),a("h2",{attrs:{id:"current-server-switching-servers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#current-server-switching-servers"}},[e._v("#")]),e._v(" Current Server & Switching Servers")]),e._v(" "),a("p",[e._v("When managing Zhylon servers, sites, and resources via the CLI, you will need to be aware of your currently active server.\nYou may view your current server using the "),a("code",[e._v("server:current")]),e._v(" command.\nTypically, most of the commands you execute using the Zhylon CLI will be executed against the active server.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon server:current\n")])])]),a("p",[e._v("Of course, you may switch your active server at any time.\nTo change your active server, use the "),a("code",[e._v("server:switch")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon server:switch\nzhylon server:switch staging\n")])])]),a("p",[e._v("To view a list of all available servers, you may use the "),a("code",[e._v("server:list")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon server:list\n")])])]),a("h2",{attrs:{id:"ssh-key-authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-key-authentication"}},[e._v("#")]),e._v(" SSH Key Authentication")]),e._v(" "),a("p",[e._v("Before performing any tasks using the Zhylon CLI, you should ensure that you have added an SSH key for the "),a("code",[e._v("zhylon")]),e._v(" user to your servers so that you can securely connect to them.\nYou may have already done this via the Zhylon UI.\nYou may test that SSH is configured correctly by running the "),a("code",[e._v("ssh:test")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon ssh:test\n")])])]),a("p",[e._v("To configure SSH key authentication, you may use the "),a("code",[e._v("ssh:configure")]),e._v(" command.\nThe "),a("code",[e._v("ssh:configure")]),e._v(" command accepts a "),a("code",[e._v("--key")]),e._v(" option which instructs the CLI which public key to add to the server.\nIn addition, you may provide a "),a("code",[e._v("--name")]),e._v(" option to specify the name that should be assigned to the key:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon ssh:configure\n\nzhylon ssh:configure "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/path/to/public/key.pub "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("sallys-macbook\n")])])]),a("p",[e._v("After you have configured SSH key authentication, you may use the "),a("code",[e._v("ssh")]),e._v(" command to create a secure connection to your server:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ssh")]),e._v("\n\nzhylon "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ssh")]),e._v(" server-name\n")])])]),a("h2",{attrs:{id:"sites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sites"}},[e._v("#")]),e._v(" Sites")]),e._v(" "),a("p",[e._v("To view the list of all available sites, you may use the "),a("code",[e._v("site:list")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon site:list\n")])])]),a("h3",{attrs:{id:"initiating-deployments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initiating-deployments"}},[e._v("#")]),e._v(" Initiating Deployments")]),e._v(" "),a("p",[e._v("One of the primary features of Zhylon is deployments. Deployments may be initiated via the Zhylon CLI using the "),a("code",[e._v("deploy")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon deploy\n\nzhylon deploy example.com\n")])])]),a("h3",{attrs:{id:"updating-environment-variables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#updating-environment-variables"}},[e._v("#")]),e._v(" Updating Environment Variables")]),e._v(" "),a("p",[e._v("You may update a site’s environment variables using the "),a("code",[e._v("env:pull")]),e._v(" and "),a("code",[e._v("env:push")]),e._v(" commands.\nThe "),a("code",[e._v("env:pull")]),e._v(" command may be used to pull down an environment file for a given site:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon env:pull\nzhylon env:pull pestphp.com\nzhylon env:pull pestphp.com .env\n")])])]),a("p",[e._v("Once this command has been executed the site’s environment file will be placed in your current directory.\nTo update the site’s environment variables, simply open and edit this file.\nWhen you are done editing the variables, use the "),a("code",[e._v("env:push")]),e._v(" command to push the variables back to your site:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon env:push\nzhylon env:push pestphp.com\nzhylon env:push pestphp.com .env\n")])])]),a("p",[e._v("If your site is utilizing Laravel’s “configuration caching” feature or has queue workers, the new variables will not be utilized until the site is deployed again.")]),e._v(" "),a("h3",{attrs:{id:"viewing-application-logs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#viewing-application-logs"}},[e._v("#")]),e._v(" Viewing Application Logs")]),e._v(" "),a("p",[e._v("You may also view a site’s logs directly from the command-line.\nTo do so, use the "),a("code",[e._v("site:logs")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon site:logs\nzhylon site:logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--follow")]),e._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View logs in realtime")]),e._v("\n\nzhylon site:logs example.com\nzhylon site:logs example.com "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--follow")]),e._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View logs in realtime")]),e._v("\n")])])]),a("h3",{attrs:{id:"reviewing-deployment-output-logs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reviewing-deployment-output-logs"}},[e._v("#")]),e._v(" Reviewing Deployment Output / Logs")]),e._v(" "),a("p",[e._v("When a deployment fails, you may review the output / logs via the Zhylon UI’s deployment history screen.\nYou may also review the output at any time on the command-line using the "),a("code",[e._v("deploy:logs")]),e._v(" command.\nIf the "),a("code",[e._v("deploy:logs")]),e._v(" command is called with no additional arguments, the logs for the latest deployment will be displayed.\nOr, you may pass the deployment ID to the "),a("code",[e._v("deploy:logs")]),e._v(" command to display the logs for a particular deployment:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon deploy:logs\n\nzhylon deploy:logs h:9D8YNkVKXB7l1JEZa0\n")])])]),a("h3",{attrs:{id:"running-commands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#running-commands"}},[e._v("#")]),e._v(" Running Commands")]),e._v(" "),a("p",[e._v("Sometimes you may wish to run an arbitrary shell command against a site.\nThe "),a("code",[e._v("command")]),e._v(" command will prompt you for the command you would like to run.\nThe command will be run relative to the site’s root directory.")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("command")]),e._v("\n\nzhylon "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("command")]),e._v(" example.com\n\nzhylon "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("command")]),e._v(" example.com "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--command")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"php artisan inspire"')]),e._v("\n")])])]),a("h3",{attrs:{id:"tinker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tinker"}},[e._v("#")]),e._v(" Tinker")]),e._v(" "),a("p",[e._v("As you may know, all Laravel applications include “Tinker” by default.\nTo enter a Tinker environment on a remote server using the Zhylon CLI, run the "),a("code",[e._v("tinker")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon tinker\n\nzhylon tinker example.com\n")])])]),a("h2",{attrs:{id:"resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resources"}},[e._v("#")]),e._v(" Resources")]),e._v(" "),a("p",[e._v("Zhylon provisions servers with a variety of resources and additional software, such as Nginx, MySQL, etc.\nYou may use the Zhylon CLI to perform common actions on those resources.")]),e._v(" "),a("h3",{attrs:{id:"checking-resource-status"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#checking-resource-status"}},[e._v("#")]),e._v(" Checking Resource Status")]),e._v(" "),a("p",[e._v("To check the current status of a resource, you may use the "),a("code",[e._v("{resource}:status")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon daemon:status\nzhylon database:status\n\nzhylon nginx:status\n\nzhylon php:status      "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View PHP status (default PHP version)")]),e._v("\nzhylon php:status "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8.4")]),e._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View PHP 8.4 status")]),e._v("\n")])])]),a("h3",{attrs:{id:"viewing-resources-logs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#viewing-resources-logs"}},[e._v("#")]),e._v(" Viewing Resources Logs")]),e._v(" "),a("p",[e._v("You may also view logs directly from the command-line.\nTo do so, use the "),a("code",[e._v("{resource}:logs")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon daemon:logs\nzhylon daemon:logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--follow")]),e._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View logs in realtime")]),e._v("\n\nzhylon database:logs\n\nzhylon nginx:logs         "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View error logs")]),e._v("\nzhylon nginx:logs access  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View access logs")]),e._v("\n\nzhylon php:logs           "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View PHP logs (default PHP version)")]),e._v("\nzhylon php:logs "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8.4")]),e._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# View PHP 8.4 logs")]),e._v("\n")])])]),a("h3",{attrs:{id:"restarting-resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restarting-resources"}},[e._v("#")]),e._v(" Restarting Resources")]),e._v(" "),a("p",[e._v("Resources may be restarted using the "),a("code",[e._v("{resource}:restart")]),e._v(" command:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon daemon:restart\n\nzhylon database:restart\n\nzhylon nginx:restart\n\nzhylon php:restart      "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Restarts PHP (default PHP version)")]),e._v("\nzhylon php:restart "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("8.4")]),e._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Restarts PHP 8.4")]),e._v("\n")])])]),a("h3",{attrs:{id:"connecting-to-resources-locally"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#connecting-to-resources-locally"}},[e._v("#")]),e._v(" Connecting To Resources Locally")]),e._v(" "),a("p",[e._v("You may use the "),a("code",[e._v("{resource}:shell")]),e._v(" command to quickly access a command line shell that lets you interact with a given resource:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("zhylon database:shell\nzhylon database:shell my-database-name\nzhylon database:shell my-database-name "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("my-user\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);